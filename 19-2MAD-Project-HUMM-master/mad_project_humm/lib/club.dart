import 'package:flutter/material.dart';
import 'package:mad_project_humm/post.dart';
import 'package:mad_project_humm/ui_utils.dart';
import 'package:mad_project_humm/users.dart';
import 'package:mad_project_humm/avatar.dart';

class ClubPage extends StatefulWidget {
  final ScrollController scrollController;

  ClubPage({this.scrollController});
  @override
  _ClubPageState createState() => _ClubPageState();
}

class _ClubPageState extends State<ClubPage> {
  final _posts = <Post>[
    Post(
      user: eunsil,
      imageUrls: [
        'data:image/jpeg;base64,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'
      ],
      likes: [
        Like(user: grootlover),
      ],
      comments: [
        Comment(
          text: '제발 집에 보내줘',
          user: grootlover,
        ),
      ],
    )
  ];

  @override
  Widget build(BuildContext context) {
    return ListView.builder(
      itemBuilder: (ctx, i) {
        if (i == 0) {
          return StoriesBarWidget();
        }
        return PostWidget(_posts[i - 1]);
      },
      itemCount: _posts.length + 1,
      controller: widget.scrollController,
    );
  }
}

class StoriesBarWidget extends StatelessWidget {
  final _users = <User>[
    currentUser,
    grootlover,
  ];

  void _onUserStoryTap(BuildContext context, int i) {
    final message =
    i == 0 ? 'Add to Your Story' : "View ${_users[i].name}'s Story";
    showSnackbar(context, message);
  }

  @override
  Widget build(BuildContext context) {
    return Container(
      height: 106.0,
      child: ListView.builder(
        scrollDirection: Axis.horizontal,
        itemBuilder: (ctx, i) {
          return AvatarWidget(
            user: _users[i],
            onTap: () => _onUserStoryTap(context, i),
            isLarge: true,
            isShowingUsernameLabel: true,
            isCurrentUserStory: i == 0,
          );
        },
        itemCount: _users.length,
      ),
    );
  }
}